{% load static %}
{% csrf_token %}

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시험 모드</title>

    <!-- CSRF 토큰을 meta 태그에 포함 -->
    <meta name="csrf-token" content="{{ csrf_token }}">

    <!-- CSS 파일 경로 설정 -->
    <link rel="stylesheet" href="{% static 'css/test_styles.css' %}">
  </head>

  <body>
    <h1>시험 모드</h1>
    <p>다음 문장의 빈칸에 들어갈 단어를 맞혀보세요:</p>

    <p>{{ sentence }}</p>

    <!-- 녹음 버튼 및 음성 미리보기 -->
    <button id="startBtn" onclick="startRecording()">녹음 시작</button>
    <button id="stopBtn" onclick="stopRecording()" disabled="disabled">녹음 중지</button>

    <p>녹음된 음성:</p>
    <audio id="audio-preview" controls="controls" style="display: none;"></audio>

    <!-- 음성 인식 결과 표시 -->
    <div id="audio-result"></div>

    <!-- JS 파일 경로 설정 -->
    <script src="{% static 'js/test_mode.js' %}"></script>

    <script>
      // Django 템플릿에서 전달된 변수
      const questionId = "{{ question_id }}"; // question id
      const currentWord = "{{ answer }}"; // 정답 단어 (빈칸에 들어갈 단어)

      // 확인용으로 출력
      console.log("Question ID:", questionId);
      console.log("Current Word:", currentWord);

      // JavaScript에서 사용할 수 있게 값 설정
      window.questionId = questionId;
      window.currentWord = currentWord;

      // CSRF 토큰을 meta 태그에서 가져와서 JavaScript에 설정
      window.csrfToken = document.querySelector('meta[name="csrf-token"]').content;
      console.log("CSRF Token:", window.csrfToken);  // CSRF 토큰 확인
    </script>

  </body>

</html>