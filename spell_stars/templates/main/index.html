{% extends "base.html" %}
{% block title %}í™ˆ - ì˜ì–´ ë‹¨ì–´ ì•”ê¸° í”„ë¡œê·¸ë¨{% endblock %}
{% block content %}
  <div style="text-align: center; padding: 2rem;">
    <h1>í™˜ì˜í•©ë‹ˆë‹¤!
      {{user.name}}ë‹˜</h1>

    {% if user.is_superuser %}
      <div style="max-width: 800px; margin: 2rem auto; padding: 2rem; border-radius: 10px; background-color: #f5f5f5;">
        <h2>ğŸ“Š ë°ì´í„° ë‚´ë³´ë‚´ê¸°</h2>
        <div style="display: grid; gap: 1rem; margin-top: 1rem;">
          <a href="{% url 'export_students' %}" class="btn btn-primary">í•™ìƒ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</a>
          <a href="{% url 'export_learning_results' %}" class="btn btn-primary">í•™ìŠµ ê²°ê³¼ ë‚´ë³´ë‚´ê¸°</a>
          <a href="{% url 'export_test_results' %}" class="btn btn-primary">ì‹œí—˜ ê²°ê³¼ ë‚´ë³´ë‚´ê¸°</a>
        </div>
      </div>
    {% else %}
      {% if user.role == "student" %}
        <p>íš¨ìœ¨ì ì¸ ë‹¨ì–´ í•™ìŠµì„ ì‹œì‘í•˜ì„¸ìš”!</p>

        <div style="max-width: 800px; margin: 2rem auto; display: grid; gap: 2rem;">
          <section style="padding: 2rem; border-radius: 10px; background-color: #f5f5f5;">
            <h2>ğŸ“š ì‚¬ì „ í•™ìŠµ ëª¨ë“œ</h2>
            <p>ê¸°ì´ˆ ë‹¨ì–´ë¥¼ ì‚¬ì „ì— í•™ìŠµí•  ìˆ˜ ìˆëŠ” ëª¨ë“œì…ë‹ˆë‹¤.</p>
            <a href="{% url 'vocab_random_category' %}" style="display: inline-block; margin-top: 1rem; padding: 10px 20px; background-color: #2196F3; color: white; text-decoration: none; border-radius: 5px;">ì‹œì‘í•˜ê¸°</a>
          </section>

          <section style="padding: 2rem; border-radius: 10px; background-color: #f5f5f5;">
            <h2>ğŸ“ ì‹œí—˜ ëª¨ë“œ</h2>
            <p>ì§€ê¸ˆê¹Œì§€ í•™ìŠµí•œ ë‹¨ì–´ë“¤ì„ ì‹œí—˜í•´ë³´ì„¸ìš”!</p>
            <a href="{% url 'test_mode' %}" style="display: inline-block; margin-top: 1rem; padding: 10px 20px; background-color: #ff9800; color: white; text-decoration: none; border-radius: 5px;">ì‹œì‘í•˜ê¸°</a>
          </section>

          <section style="padding: 2rem; border-radius: 10px; background-color: #f5f5f5;">
            <h2>ğŸ—£ï¸ ë°œìŒ ì—°ìŠµ ëª¨ë“œ</h2>
            <p>ë‹¨ì–´ ë°œìŒì„ ì—°ìŠµí•´ë³´ëŠ” ëª¨ë“œì…ë‹ˆë‹¤.</p>
            <a href="{% url 'pron_practice' %}" style="display: inline-block; margin-top: 1rem; padding: 10px 20px; background-color: #9c27b0; color: white; text-decoration: none; border-radius: 5px;">ì‹œì‘í•˜ê¸°</a>
          </section>
        </div>
      {% endif %}
      <div class="container bg-white shadow-md p-5 form-layout">
        {% if user.role == 'parent' %}
          <!-- ì—°ê²°ëœ ìë…€ ëª©ë¡ -->
          <div class="row">
            <div class="col-12">
              <h3 class="mb-4">ì—°ê²°ëœ ìë…€ ì •ë³´</h3>
              <div class="row">
                {% for relation in user.parent_profile.parentstudentrelation_set.all %}
                  <div class="col-md-6 mb-4">
                    <div class="card student-card" style="cursor: pointer; " onclick="location.href='{% url 'student_dashboard' student_id=relation.student.id %}'">
                      <div class="card-body" style="padding: 2rem; border-radius: 10px; background-color: #f5f5f5;">
                        <hr>
                        <p>
                          <strong>ì´ë¦„ :</strong>
                          {{ relation.student.user.name }}</p>
                        <p>
                          <strong>í•™ìƒ ID:</strong>
                          {{ relation.student.user.username }}</p>
                        <p>
                          <strong>í•™ë…„:</strong>
                          {{ relation.student.user.get_grade_display }}</p>
                        <p>
                          <strong>ê´€ê³„:</strong>
                          {{ relation.student_relation }}</p>
                        <p>
                          <strong>ì—°ê²°ì¼:</strong>
                          {{ relation.created_at|date:"Yë…„ mì›” dì¼" }}</p>
                        <hr>
                      </div>
                      <br>
                    </div>
                  </div>
                  {% empty %}
                  <div class="col-12">
                    <div class="alert alert-info">
                      í˜„ì¬ ë“±ë¡ëœ ìë…€ê°€ ì—†ìŠµë‹ˆë‹¤.
                    </div>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endif %}
      {% endif %}
    </div>
  </div>
{% endblock %}
